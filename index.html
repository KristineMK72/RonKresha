<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ron Kresha Interactive StoryMap</title>

  <!-- Leaflet CSS & JS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f4f4f4;
      color: #333;
    }

    header {
      background-color: #222;
      color: #fff;
      padding: 2rem 1rem;
      text-align: center;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    header h1 {
      margin: 0;
      font-size: 2rem;
    }

    header p {
      margin: 0.5rem 0 0 0;
      font-size: 1rem;
      color: #ccc;
    }

    .chapter {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
      padding: 2rem 1rem;
      border-bottom: 1px solid #ccc;
      background-color: #fff;
      opacity: 0;
      transform: translateY(50px);
      transition: all 0.8s ease-out;
    }

    .chapter.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .chapter h2 {
      margin-top: 0;
      color: #c00;
      font-size: 1.5rem;
    }

    .chapter p {
      font-size: 1rem;
      line-height: 1.5;
    }

    .map-container {
      width: 100%;
      height: 300px;
      border: 1px solid #ccc;
      border-radius: 5px;
      margin-top: 1rem;
    }

    .timeline {
      display: flex;
      gap: 1rem;
      overflow-x: auto;
      padding: 1rem;
      background-color: #eee;
      border-radius: 5px;
    }

    .event {
      flex: 0 0 auto;
      min-width: 200px;
      background-color: #fff;
      border: 1px solid #ccc;
      padding: 1rem;
      border-radius: 5px;
    }

    @media (min-width: 768px) {
      .chapter {
        grid-template-columns: 1fr 1fr;
      }
    }
  </style>
</head>
<body>

<header>
  <h1>Ron Kresha: A Controversial Trail</h1>
  <p>Scroll through key allegations and events</p>
</header>

<!-- Chapters -->
<div class="chapter" data-map="map1">
  <div>
    <h2>üß© Economic Gateway Dispute</h2>
    <p>Allegedly stolen from ADC4GIS, a Wisconsin-based GIS firm. Golden Shovel rebranded the platform without attribution.</p>
  </div>
  <div class="map-container" id="map1"></div>
</div>

<div class="chapter">
  <h2>üîê GateKeeper Theft</h2>
  <p>GateKeeper was reportedly developed by Mary Whelan and later mirrored by Golden Shovel Agency.</p>
  <div class="timeline">
    <div class="event">Mary builds GateKeeper (Year)</div>
    <div class="event">Golden Shovel launches similar tool (Year)</div>
  </div>
</div>

<div class="chapter" data-map="map2">
  <div>
    <h2>üß† Atomic Learning IP Issues</h2>
    <p>During his time at Atomic Learning, Kresha allegedly reused proprietary educational content without consent.</p>
  </div>
  <div class="map-container" id="map2"></div>
</div>

<div class="chapter">
  <h2>üí∏ PPP Loan Fraud Allegations</h2>
  <p>Golden Shovel received over $320,000 in PPP loans despite having no employees, according to sworn testimony.</p>
  <div class="timeline">
    <div class="event">2020: Claimed 17 employees</div>
    <div class="event">2021: Claimed 20 employees</div>
    <div class="event">Testimony: No employees, only contractors</div>
  </div>
</div>

<div class="chapter" data-map="map3">
  <div>
    <h2>üèõÔ∏è Legislative Ethics</h2>
    <p>As Rep. of District 10A, Kresha faced criticism for voting against COVID relief while benefiting from PPP, and for opposing education reforms.</p>
  </div>
  <div class="map-container" id="map3"></div>
</div>

<script>
  // Initialize Leaflet maps
  const mapsData = {
    map1: {
      center: [44.5, -89.5],
      zoom: 6,
      markers: [
        { coords: [44.9778, -93.2650], label: 'Golden Shovel HQ (MN)' },
        { coords: [43.0731, -89.4012], label: 'ADC4GIS HQ (WI)' }
      ]
    },
    map2: {
      center: [44.0, -94.0],
      zoom: 6,
      markers: [
        { coords: [44.3040, -93.9558], label: 'Atomic Learning HQ (MN)' },
        { coords: [45.0, -93.0], label: 'Original Content Creators' }
      ]
    },
    map3: {
      center: [46.3580, -94.2000],
      zoom: 7,
      markers: [
        { coords: [46.3580, -94.2000], label: 'District 10A' },
        { coords: [44.9778, -93.2650], label: 'Golden Shovel PPP Loans' }
      ]
    }
  };

  const maps = {};

  function createMap(id, data) {
    const map = L.map(id, { scrollWheelZoom: false });
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    data.markers.forEach(m => L.marker(m.coords).addTo(map).bindPopup(m.label));
    maps[id] = map;
  }

  Object.entries(mapsData).forEach(([id, data]) => createMap(id, data));

  // IntersectionObserver for scroll animations
  const chapters = document.querySelectorAll('.chapter');
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');

        // Zoom map to fit markers when visible
        const mapId = entry.target.getAttribute('data-map');
        if (mapId && maps[mapId]) {
          const group = L.featureGroup(mapsData[mapId].markers.map(m => L.marker(m.coords)));
          maps[mapId].fitBounds(group.getBounds().pad(0.5));
        }
      }
    });
  }, { threshold: 0.5 });

  chapters.forEach(ch => observer.observe(ch));
</script>

</body>
</html>
